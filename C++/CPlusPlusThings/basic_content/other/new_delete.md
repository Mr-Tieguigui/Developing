# new 和 delete

程序运行时，计算机的内存被分为4个区：程序代码区、全局数据区、堆和栈。其中，堆可由用户分配和释放。C语言中使用函数malloc()和free()来进行动态内存管理。C++则提供了运算符new和delete来做同样的工作，而且后者比前者性能更优越，使用更灵活方便。


```c++
指针变量名 = new 类型
    int *p;
    p = new int;
delete 指针变量名
    delete p;
```

下面对new和delete的使用再做一下几点说明：

- 用运算符new分配的空间，使用结束后应该用也只能用delete显式地释放，否则这部分空间将不能回收而变成死空间。
- 在使用运算符new动态分配内存时，如果没有足够的内存满足分配要求，new将返回空指针（NULL）。
- 使用运算符new可以为数组动态分配内存空间，这时需要在类型后面加上数组大小。

```c++
指针变量名 = new 类型名[下标表达式];
int *p = new int[10];
```
 释放动态分配的数组存储区时，可使用delete运算符。

```c++
delete []指针变量名;
delete p;
```

- new 可在为简单变量分配空间的同时，进行初始化

```c++
指针变量名 = new 类型名(初值);
int *p;
p = new int(99);
···
delete p;
```